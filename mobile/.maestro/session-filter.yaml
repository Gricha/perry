appId: com.subroutine.workspace
---
# Test: Session Screen and Filter
# Verifies sessions screen loads and filter chips work when connected

- launchApp:
    clearState: true

# Wait for app to load then navigate to Sessions
- extendedWaitUntil:
    visible: "Sessions"
    timeout: 10000

- tapOn: "Sessions"

# Handle error state when server unreachable
- runFlow:
    when:
      visible: "Cannot Load Sessions"
    commands:
      - assertVisible: "Retry"

# Test filter chips when connected
- runFlow:
    when:
      visible: "All"
    commands:
      - assertVisible: "Claude"
      - assertVisible: "OpenCode"
      - assertVisible: "Codex"
      # Test selecting Claude filter
      - tapOn: "Claude"
      # Test selecting All filter
      - tapOn: "All"

# Handle empty state
- runFlow:
    when:
      visible: "No sessions found"
    commands:
      - assertVisible: "Start a coding agent in a workspace"

# Navigate back to verify everything still works
- tapOn: "Workspaces"
- assertVisible: "Workspaces"
