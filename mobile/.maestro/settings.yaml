appId: com.subroutine.workspace
---
# Test: Settings Screen Visibility and Interactions
# Verifies all settings sections are accessible including new features

- launchApp:
    clearState: true

# Navigate to Settings
- tapOn: "Settings"

# Connection section
- assertVisible: "Connection"
- assertVisible: "Agent Server"
- assertVisible: "Server URL"

# Coding Agents section
- assertVisible: "Coding Agents"
- assertVisible: "OpenCode"
- assertVisible: "Claude Code"
- assertVisible: "GitHub"

# Scroll to see Environment Variables section
- scroll:
    direction: DOWN

# Environment Variables section
- assertVisible: "Environment Variables"
- assertVisible:
    text: "injected into all workspaces"
    optional: true

# Scroll more to see File Mappings
- scroll:
    direction: DOWN

# File Mappings section
- assertVisible: "File Mappings"
- assertVisible:
    text: "Copy files from host"
    optional: true

# Scroll more to see Scripts section
- scroll:
    direction: DOWN

# Scripts section
- assertVisible: "Scripts"
- assertVisible: "Post-Start Script"

# Scroll to see About section
- scroll:
    direction: DOWN

- assertVisible: "About"

# About section should show system info (when connected)
- runFlow:
    when:
      visible: "Host"
    commands:
      - assertVisible: "Docker"
      - assertVisible: "Workspaces"
      - assertVisible: "Uptime"
      - assertVisible: "Status"

# Handle connection error state with retry button
- runFlow:
    when:
      visible: "Server Unreachable"
    commands:
      - assertVisible: "Retry Connection"
      - tapOn: "Retry Connection"

# Handle other connection error states
- runFlow:
    when:
      visible: "Connection Error"
    commands:
      - assertVisible: "Retry Connection"

# Navigate back to Workspaces
- scroll:
    direction: UP

- scroll:
    direction: UP

- scroll:
    direction: UP

- tapOn: "Workspaces"
- assertVisible: "Workspaces"
